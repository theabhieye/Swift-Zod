name: PR Validation

on:
  pull_request:
    types: [opened, edited, synchronize]

jobs:
  validate:
    name: Validate Pull Request Description
    runs-on: ubuntu-latest

    steps:
      - name: Check out code
        uses: actions/checkout@v4

      # -----------------------------------------------------------
      # üìù Ensure PR Description (Body) is NOT empty (safe version)
      # -----------------------------------------------------------
      - name: Ensure PR description exists
        run: |
          # Read PR body into a SAFE variable (will not be executed)
          BODY="${{ github.event.pull_request.body }}"

          echo "Preview of PR Body (first 200 chars):"
          echo "${BODY:0:200}"

          # Remove all whitespace and check length
          TRIMMED=$(echo "$BODY" | tr -d '[:space:]')

          if [ -z "$TRIMMED" ]; then
            echo "::error ::PR description cannot be empty. Please add details before requesting review."
            exit 1
          fi

          echo "‚úî PR description exists."
